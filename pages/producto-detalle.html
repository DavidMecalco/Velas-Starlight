<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Producto | Velas Starlight</title>

    <!-- SEO Meta Tags -->
    <meta name="description" id="page-description" content="Descubre nuestros productos artesanales únicos">
    <meta name="keywords" id="page-keywords"
        content="velas artesanales, productos belleza, soya, parafina, fragancias naturales">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Velas Starlight">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Canonical URL -->
    <link rel="canonical" id="canonical-url" href="">

    <!-- Open Graph -->
    <meta property="og:title" id="og-title" content="Producto | Velas Starlight">
    <meta property="og:description" id="og-description" content="Descubre nuestros productos artesanales únicos">
    <meta property="og:image" id="og-image" content="">
    <meta property="og:url" id="og-url" content="">
    <meta property="og:type" content="product">
    <meta property="og:site_name" content="Velas Starlight">
    <meta property="og:locale" content="es_MX">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" id="twitter-title" content="Producto | Velas Starlight">
    <meta name="twitter:description" id="twitter-description" content="Descubre nuestros productos artesanales únicos">
    <meta name="twitter:image" id="twitter-image" content="">
    <meta name="twitter:site" content="@VelasStarlight">

    <!-- Product Meta Tags -->
    <meta property="product:brand" content="Velas Starlight">
    <meta property="product:availability" id="product-availability" content="in stock">
    <meta property="product:condition" content="new">
    <meta property="product:price:amount" id="product-price-meta" content="">
    <meta property="product:price:currency" content="MXN">
    <meta property="product:category" id="product-category-meta" content="">

    <!-- Additional SEO -->
    <meta name="theme-color" content="#2D3E33">
    <meta name="msapplication-TileColor" content="#2D3E33">

    <!-- Geo Tags -->
    <meta name="geo.region" content="MX">
    <meta name="geo.country" content="México">
    <meta name="geo.placename" content="México">

    <!-- Business Info -->
    <meta name="rating" content="5">
    <meta name="distribution" content="global">
    <meta name="revisit-after" content="7 days">

    <!-- Mobile Optimization -->
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Velas Starlight">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'beige-almond': '#F6F1E9',
                        'dark-green': '#2D3E33',
                        'warm-cream': '#EDE6DA',
                        'sage-green': '#3A5A40',
                        'leaf-green': '#A3B18A',
                        'gray-sand': '#D6CEC3',
                        'accent-gold': '#D4AF37',
                        'soft-pink': '#F8E8E8',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'scale-in': 'scaleIn 0.4s ease-out',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    backdropBlur: {
                        xs: '2px',
                    }
                }
            }
        }
    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../images/favicon.png">

    <!-- CSS Fixes para alineación de tarjetas -->
    <link rel="stylesheet" href="../css/carrito-responsive-fixes.css">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json" id="product-structured-data">
    {
        "@context": "https://schema.org/",
        "@type": "Product",
        "name": "Producto | Velas Starlight",
        "description": "Descubre nuestros productos artesanales únicos",
        "image": "",
        "brand": {
            "@type": "Brand",
            "name": "Velas Starlight"
        },
        "manufacturer": {
            "@type": "Organization",
            "name": "Velas Starlight"
        },
        "offers": {
            "@type": "Offer",
            "url": "",
            "priceCurrency": "MXN",
            "price": "0",
            "availability": "https://schema.org/InStock",
            "seller": {
                "@type": "Organization",
                "name": "Velas Starlight"
            }
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "5",
            "reviewCount": "1"
        }
    }
    </script>

    <!-- Organization Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Velas Starlight",
        "url": "https://velasstarlight.com",
        "logo": "https://velasstarlight.com/images/logo.png",
        "description": "Velas artesanales y productos de belleza natural de alta calidad",
        "foundingDate": "2020",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+52-55-6468-2112",
            "contactType": "customer service",
            "availableLanguage": "Spanish"
        },
        "sameAs": [
            "https://www.facebook.com/VelasStarlight",
            "https://www.instagram.com/VelasStarlight",
            "https://wa.me/525564682112"
        ],
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "MX",
            "addressRegion": "México"
        }
    }
    </script>

    <!-- Website Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Velas Starlight",
        "url": "https://velasstarlight.com",
        "description": "Velas artesanales y productos de belleza natural",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://velasstarlight.com/pages/productos.html?search={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>

    <!-- Estilos Premium -->
    <style>
        /* Variables CSS Premium */
        :root {
            --primary: #1a1a1a;
            --secondary: #2D3E33;
            --accent: #A3B18A;
            --gold: #D4AF37;
            --cream: #FEFEFE;
            --warm: #F8F6F3;
            --gray-50: #FAFAFA;
            --gray-100: #F5F5F5;
            --gray-200: #EEEEEE;
            --gray-300: #E0E0E0;
            --gray-400: #BDBDBD;
            --gray-500: #9E9E9E;
            --gray-600: #757575;
            --gray-700: #616161;
            --gray-800: #424242;
            --gray-900: #212121;
            --shadow-soft: 0 2px 20px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.12);
            --shadow-strong: 0 20px 40px rgba(0, 0, 0, 0.15);
            --radius: 16px;
            --radius-lg: 24px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Reset y base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--cream);
            color: var(--primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Animaciones elegantes */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* Header Premium */
        .header-premium {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--gray-200);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            transition: var(--transition);
        }

        .header-premium.scrolled {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: var(--shadow-soft);
        }

        /* Contenedor principal */
        .container-premium {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Breadcrumb Premium */
        .breadcrumb-premium {
            padding: 1.5rem 0;
            background: var(--warm);
            border-bottom: 1px solid var(--gray-200);
        }

        .breadcrumb-premium nav {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.875rem;
        }

        .breadcrumb-premium a {
            color: var(--gray-600);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
        }

        .breadcrumb-premium a:hover {
            color: var(--secondary);
            background: var(--gray-100);
        }

        .breadcrumb-premium .current {
            color: var(--primary);
            font-weight: 600;
        }

        /* Layout principal */
        .product-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            padding: 3rem 0;
            align-items: start;
        }

        /* Galería Premium */
        .gallery-premium {
            position: sticky;
            top: 120px;
        }

        .main-image-container {
            position: relative;
            background: var(--cream);
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-medium);
        }

        .main-image {
            width: 100%;
            height: 600px;
            object-fit: cover;
            transition: var(--transition);
        }

        .main-image:hover {
            transform: scale(1.02);
        }

        /* Badge flotante */
        .floating-badge {
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            background: linear-gradient(135deg, #FF6B6B, #FF5252);
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 50px;
            font-size: 0.875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-medium);
            animation: float 6s ease-in-out infinite;
            z-index: 10;
        }

        /* Thumbnails Premium */
        .thumbnails-premium {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .thumbnail {
            aspect-ratio: 1;
            border-radius: var(--radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            border: 3px solid transparent;
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
        }

        .thumbnail.active {
            border-color: var(--secondary);
            box-shadow: var(--shadow-strong);
        }

        /* Botones de acción de galería */
        .gallery-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .gallery-action-btn {
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            text-decoration: none;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .gallery-action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .gallery-action-btn:hover::before {
            left: 100%;
        }

        .whatsapp-btn {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }

        .whatsapp-btn:hover {
            background: linear-gradient(135deg, #128C7E, #075E54);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .share-btn {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
        }

        .share-btn:hover {
            background: linear-gradient(135deg, #1976D2, #1565C0);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .gallery-action-btn i {
            font-size: 1.125rem;
        }

        /* Panel de información Premium */
        .info-panel {
            padding: 2rem 0;
        }

        /* Badges de estado */
        .status-badges {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .badge {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-category {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .badge-available {
            background: #E8F5E8;
            color: #2E7D32;
        }

        /* Título Premium */
        .product-title-premium {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1.1;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        /* Descripción */
        .product-description {
            font-size: 1.125rem;
            color: var(--gray-600);
            line-height: 1.7;
            margin-bottom: 2rem;
            max-width: 90%;
        }

        /* Precio Premium */
        .price-section {
            margin-bottom: 3rem;
        }

        .price-current {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
        }

        .price-original {
            font-size: 1.5rem;
            color: var(--gray-400);
            text-decoration: line-through;
            margin-left: 1rem;
        }

        /* Secciones de opciones */
        .option-section {
            margin-bottom: 2.5rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
        }

        .section-icon {
            color: var(--accent);
            font-size: 1.125rem;
        }

        /* Opciones Premium */
        .options-grid {
            display: grid;
            gap: 0.75rem;
        }

        .option-card {
            background: var(--cream);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(163, 177, 138, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .option-card:hover::before {
            left: 100%;
        }

        .option-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .option-card.selected {
            background: var(--secondary);
            border-color: var(--secondary);
            color: white;
            box-shadow: var(--shadow-strong);
        }

        .option-info h4 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .option-info p {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .option-price {
            font-size: 1.25rem;
            font-weight: 700;
            font-family: 'Playfair Display', serif;
        }

        /* Dropdown Premium (Fragancias, Tamaños y Tipos) */
        .fragrance-dropdown,
        .size-dropdown,
        .type-dropdown {
            position: relative;
            width: 100%;
        }

        .dropdown-button {
            width: 100%;
            background: var(--cream);
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 1.25rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--primary);
        }

        .dropdown-button:hover {
            border-color: var(--accent);
            box-shadow: var(--shadow-soft);
        }

        .dropdown-button.active {
            border-color: var(--secondary);
            box-shadow: var(--shadow-medium);
        }

        .dropdown-icon {
            transition: var(--transition);
            color: var(--accent);
        }

        .dropdown-button.active .dropdown-icon {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--cream);
            border: 2px solid var(--gray-200);
            border-top: none;
            border-radius: 0 0 var(--radius) var(--radius);
            box-shadow: var(--shadow-medium);
            z-index: 100;
            max-height: 300px;
            overflow-y: auto;
        }

        .dropdown-menu.hidden {
            display: none;
        }

        .dropdown-item {
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: var(--gray-100);
        }

        .dropdown-item.selected {
            background: var(--secondary);
            color: white;
        }

        .dropdown-item-info h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .dropdown-item-info p {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .dropdown-item-icon {
            color: var(--accent);
            font-size: 1.125rem;
        }

        .dropdown-item.selected .dropdown-item-icon {
            color: white;
        }

        /* Estilos específicos para dropdown de tamaños */
        .size-dropdown .dropdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .size-item-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .size-item-info {
            flex: 1;
        }

        .size-item-price {
            font-size: 1.125rem;
            font-weight: 700;
            font-family: 'Playfair Display', serif;
            color: var(--secondary);
        }

        .dropdown-item.selected .size-item-price {
            color: white;
        }

        .size-item-label {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .size-item-description {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Control de cantidad Premium */
        .quantity-section {
            margin-bottom: 2.5rem;
        }

        .quantity-control {
            display: inline-flex;
            align-items: center;
            background: var(--gray-100);
            border-radius: 50px;
            padding: 0.5rem;
            gap: 1rem;
        }

        .qty-btn {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            border: none;
            background: var(--cream);
            color: var(--primary);
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-soft);
        }

        .qty-btn:hover {
            background: var(--secondary);
            color: white;
            transform: scale(1.1);
        }

        .qty-display {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
            min-width: 3rem;
            text-align: center;
        }

        /* Botones Premium */
        .actions-section {
            margin-bottom: 3rem;
        }

        .btn-premium {
            width: 100%;
            padding: 1.25rem 2rem;
            border-radius: var(--radius);
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: none;
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }

        .btn-premium::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .btn-premium:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-strong);
        }

        .btn-secondary {
            background: var(--cream);
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-strong);
        }

        /* Features Premium */
        .features-premium {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background: var(--warm);
            border-radius: var(--radius);
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: var(--transition);
            border: 1px solid var(--gray-200);
        }

        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .feature-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: white;
            flex-shrink: 0;
        }

        .feature-icon.shipping {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }

        .feature-icon.warranty {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }

        .feature-content h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .feature-content p {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        /* Sección de información detallada rediseñada */
        .details-section {
            background: linear-gradient(135deg, var(--warm) 0%, #F5F3F0 100%);
            padding: 5rem 0;
            position: relative;
        }

        .details-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%23A3B18A" fill-opacity="0.03"><circle cx="20" cy="20" r="1"/></g></g></svg>');
            pointer-events: none;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2.5rem;
            position: relative;
            z-index: 1;
        }

        .detail-card {
            background: var(--cream);
            border-radius: 24px;
            padding: 2.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(163, 177, 138, 0.1);
        }

        .detail-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--secondary), var(--accent));
            border-radius: 24px 24px 0 0;
        }

        .detail-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }

        .detail-card:nth-child(1) .detail-icon {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }

        .detail-card:nth-child(2) .detail-icon {
            background: linear-gradient(135deg, #32CD32, #228B22);
        }

        .detail-card:nth-child(3) .detail-icon {
            background: linear-gradient(135deg, #FF69B4, #FF1493);
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 1.25rem;
            margin-bottom: 2rem;
        }

        .detail-icon {
            width: 4rem;
            height: 4rem;
            border-radius: 20px;
            background: var(--accent);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .detail-icon::after {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 22px;
            padding: 2px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.1));
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: xor;
        }

        .detail-title {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
            letter-spacing: -0.02em;
        }

        .detail-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .detail-list li {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem 0;
            color: var(--gray-600);
            border-bottom: 1px solid rgba(163, 177, 138, 0.1);
            transition: var(--transition);
            font-size: 1rem;
            line-height: 1.6;
        }

        .detail-list li:last-child {
            border-bottom: none;
        }

        .detail-list li:hover {
            color: var(--primary);
            transform: translateX(4px);
            background: rgba(163, 177, 138, 0.05);
            border-radius: 12px;
            margin: 0 -0.5rem;
            padding: 1rem 1.5rem;
        }

        .detail-list li i {
            color: var(--accent);
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            background: rgba(163, 177, 138, 0.1);
            border-radius: 8px;
            flex-shrink: 0;
            margin-top: 0.125rem;
        }

        .detail-card:nth-child(1) .detail-list li i {
            background: rgba(255, 215, 0, 0.15);
            color: #FFA500;
        }

        .detail-card:nth-child(2) .detail-list li i {
            background: rgba(50, 205, 50, 0.15);
            color: #228B22;
        }

        .detail-card:nth-child(3) .detail-list li i {
            background: rgba(255, 105, 180, 0.15);
            color: #FF1493;
        }

        /* Efectos especiales para cada tarjeta */
        .detail-card:nth-child(1)::after {
            content: '✨';
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 1.5rem;
            opacity: 0.3;
        }

        .detail-card:nth-child(2)::after {
            content: '🌿';
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 1.5rem;
            opacity: 0.3;
        }

        .detail-card:nth-child(3)::after {
            content: '💖';
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 1.5rem;
            opacity: 0.3;
        }

        /* Animaciones para las tarjetas de detalle */
        .detail-card {
            opacity: 0;
            transform: translateY(40px);
            animation: detailCardFadeIn 0.8s ease-out forwards;
        }

        .detail-card:nth-child(1) {
            animation-delay: 0.2s;
        }

        .detail-card:nth-child(2) {
            animation-delay: 0.4s;
        }

        .detail-card:nth-child(3) {
            animation-delay: 0.6s;
        }

        @keyframes detailCardFadeIn {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Título de sección mejorado */
        .details-section-title {
            text-align: center;
            margin-bottom: 4rem;
        }

        .details-section-title h2 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .details-section-title p {
            font-size: 1.25rem;
            color: var(--gray-600);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Toast Premium */
        .toast-premium {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--cream);
            border-radius: var(--radius);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-strong);
            border-left: 4px solid var(--accent);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
        }

        .toast-premium.success {
            border-left-color: #4CAF50;
            background: linear-gradient(135deg, #E8F5E8, var(--cream));
        }

        .toast-premium.error {
            border-left-color: #F44336;
            background: linear-gradient(135deg, #FFEBEE, var(--cream));
        }

        .toast-premium.info {
            border-left-color: #2196F3;
            background: linear-gradient(135deg, #E3F2FD, var(--cream));
        }

        /* Animación especial para toast de carrito */
        .toast-premium.success i {
            color: #4CAF50;
            animation: bounce 0.6s ease-in-out;
        }

        @keyframes bounce {

            0%,
            20%,
            60%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            80% {
                transform: translateY(-5px);
            }
        }

        @keyframes slideOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }

            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        /* Estilos especiales para toast del carrito */
        .cart-toast {
            min-width: 400px;
            max-width: 500px;
            padding: 1.5rem;
            border-left: 4px solid #4CAF50;
            box-shadow: 0 10px 40px rgba(76, 175, 80, 0.15);
        }

        .cart-toast a:hover {
            background: #4CAF50 !important;
            color: white !important;
        }

        /* Loading State Premium para Producto Detalle - Vela Encendida */
        .product-loading-state {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 600px;
            background: linear-gradient(135deg, #FEFEFE 0%, #F8F6F3 50%, #FEFEFE 100%);
            border-radius: var(--radius-lg);
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(212, 175, 55, 0.1);
            box-shadow: 0 8px 32px rgba(212, 175, 55, 0.08);
        }

        .product-loading-state::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(212, 175, 55, 0.05) 0%, transparent 70%);
            pointer-events: none;
        }

        .product-loading-container {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3rem;
            text-align: center;
        }

        /* Vela Animada */
        .candle-container {
            position: relative;
            width: 80px;
            height: 200px;
        }

        /* Cuerpo de la vela */
        .candle-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 160px;
            background: linear-gradient(135deg, #FEFEFE 0%, #F5F3F0 50%, #EDE6DA 100%);
            border-radius: 8px 8px 4px 4px;
            box-shadow:
                inset -8px 0 16px rgba(212, 175, 55, 0.1),
                inset 8px 0 16px rgba(255, 255, 255, 0.8),
                0 8px 32px rgba(212, 175, 55, 0.15),
                0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Mecha */
        .candle-wick {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 3px;
            height: 15px;
            background: linear-gradient(to bottom, #8B4513 0%, #654321 100%);
            border-radius: 2px;
            z-index: 2;
        }

        /* Llama */
        .candle-flame {
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 30px;
            background: radial-gradient(ellipse at center bottom,
                    #FFD700 0%,
                    #FFA500 30%,
                    #FF6B35 60%,
                    #FF4500 80%,
                    rgba(255, 69, 0, 0.8) 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flameFlicker 2s ease-in-out infinite alternate;
            z-index: 3;
        }

        /* Resplandor de la llama */
        .candle-glow {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle,
                    rgba(255, 215, 0, 0.4) 0%,
                    rgba(255, 165, 0, 0.2) 30%,
                    rgba(255, 69, 0, 0.1) 60%,
                    transparent 100%);
            border-radius: 50%;
            animation: glowPulse 3s ease-in-out infinite;
            z-index: 1;
        }

        /* Cera derretida */
        .candle-wax {
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 64px;
            height: 8px;
            background: linear-gradient(135deg, #FEFEFE 0%, #F5F3F0 100%);
            border-radius: 50%;
            opacity: 0.9;
            box-shadow: 0 2px 8px rgba(212, 175, 55, 0.1);
        }

        .candle-wax::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 5px;
            width: 4px;
            height: 12px;
            background: linear-gradient(to bottom, #FEFEFE, rgba(245, 243, 240, 0.3));
            border-radius: 2px;
            animation: waxDrip 4s ease-in-out infinite;
            box-shadow: 1px 0 3px rgba(212, 175, 55, 0.1);
        }

        .candle-wax::after {
            content: '';
            position: absolute;
            top: 2px;
            right: 8px;
            width: 3px;
            height: 8px;
            background: linear-gradient(to bottom, #FEFEFE, rgba(245, 243, 240, 0.3));
            border-radius: 2px;
            animation: waxDrip 4s ease-in-out infinite 1s;
            box-shadow: 1px 0 3px rgba(212, 175, 55, 0.1);
        }

        .product-loading-text {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--secondary);
            font-family: 'Playfair Display', serif;
            letter-spacing: -0.02em;
            animation: textGlow 3s ease-in-out infinite;
            text-shadow: 0 2px 8px rgba(45, 62, 51, 0.2);
        }

        /* Animaciones */
        @keyframes flameFlicker {
            0% {
                transform: translateX(-50%) scale(1) rotate(-1deg);
                opacity: 1;
            }

            25% {
                transform: translateX(-50%) scale(1.05) rotate(1deg);
                opacity: 0.9;
            }

            50% {
                transform: translateX(-50%) scale(0.95) rotate(-0.5deg);
                opacity: 1;
            }

            75% {
                transform: translateX(-50%) scale(1.02) rotate(0.5deg);
                opacity: 0.95;
            }

            100% {
                transform: translateX(-50%) scale(1) rotate(-1deg);
                opacity: 1;
            }
        }

        @keyframes glowPulse {

            0%,
            100% {
                opacity: 0.6;
                transform: translateX(-50%) scale(1);
            }

            50% {
                opacity: 0.9;
                transform: translateX(-50%) scale(1.1);
            }
        }

        @keyframes waxDrip {

            0%,
            90% {
                height: 8px;
                opacity: 0.8;
            }

            95% {
                height: 15px;
                opacity: 0.6;
            }

            100% {
                height: 8px;
                opacity: 0.8;
            }
        }

        @keyframes textGlow {

            0%,
            100% {
                text-shadow: 0 2px 8px rgba(45, 62, 51, 0.2);
                opacity: 1;
                transform: scale(1);
            }

            50% {
                text-shadow: 0 4px 16px rgba(45, 62, 51, 0.3), 0 0 20px rgba(212, 175, 55, 0.2);
                opacity: 0.95;
                transform: scale(1.02);
            }
        }

        /* Partículas de luz flotantes */
        .candle-container::before {
            content: '';
            position: absolute;
            top: -60px;
            left: 20%;
            width: 3px;
            height: 3px;
            background: radial-gradient(circle, #FFD700, transparent);
            border-radius: 50%;
            animation: floatParticle1 4s ease-in-out infinite;
            opacity: 0.7;
        }

        .candle-container::after {
            content: '';
            position: absolute;
            top: -45px;
            right: 25%;
            width: 2px;
            height: 2px;
            background: radial-gradient(circle, #FFA500, transparent);
            border-radius: 50%;
            animation: floatParticle2 3s ease-in-out infinite 1s;
            opacity: 0.6;
        }

        @keyframes floatParticle1 {

            0%,
            100% {
                transform: translateY(0px) translateX(0px);
                opacity: 0;
            }

            10% {
                opacity: 0.7;
            }

            50% {
                transform: translateY(-20px) translateX(5px);
                opacity: 0.4;
            }

            90% {
                opacity: 0.1;
            }
        }

        @keyframes floatParticle2 {

            0%,
            100% {
                transform: translateY(0px) translateX(0px);
                opacity: 0;
            }

            15% {
                opacity: 0.6;
            }

            50% {
                transform: translateY(-25px) translateX(-8px);
                opacity: 0.3;
            }

            85% {
                opacity: 0.1;
            }
        }

        /* Sombra suave de la vela */
        .candle-body::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 15px;
            background: radial-gradient(ellipse, rgba(212, 175, 55, 0.15) 0%, rgba(45, 62, 51, 0.1) 40%, transparent 70%);
            border-radius: 50%;
        }

        /* Animaciones de entrada para el contenido del producto */
        .product-layout {
            opacity: 0;
            transform: translateY(40px);
            animation: productFadeInUp 0.8s ease-out forwards;
        }

        .gallery-premium {
            opacity: 0;
            transform: translateX(-30px);
            animation: slideInLeft 0.8s ease-out 0.2s forwards;
        }

        .info-panel {
            opacity: 0;
            transform: translateX(30px);
            animation: slideInRight 0.8s ease-out 0.4s forwards;
        }

        @keyframes productFadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: scale(1);
            }

            to {
                opacity: 0;
                transform: scale(0.95);
            }
        }

        /* Toast responsive */
        @media (max-width: 768px) {
            .toast-premium {
                top: 1rem;
                right: 1rem;
                left: 1rem;
                min-width: auto;
                max-width: none;
            }

            .cart-toast {
                min-width: auto;
                max-width: none;
                padding: 1rem;
            }

            /* Loading responsive */
            .product-loading-state {
                min-height: 400px;
                margin: 1rem 0;
            }

            .candle-container {
                width: 60px;
                height: 150px;
            }

            .candle-body {
                width: 45px;
                height: 120px;
            }

            .candle-flame {
                width: 15px;
                height: 22px;
                top: -28px;
            }

            .candle-glow {
                width: 60px;
                height: 60px;
                top: -40px;
            }

            .candle-wax {
                width: 48px;
                height: 6px;
            }

            .product-loading-text {
                font-size: 1.25rem;
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Responsive Premium */
        @media (max-width: 1024px) {
            .product-layout {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .gallery-premium {
                position: static;
            }

            .main-image {
                height: 500px;
            }

            .thumbnails-premium {
                grid-template-columns: repeat(3, 1fr);
            }

            .details-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .details-section-title h2 {
                font-size: 2.5rem;
            }

            .detail-card {
                padding: 2rem;
            }

            .detail-icon {
                width: 3.5rem;
                height: 3.5rem;
                font-size: 1.25rem;
            }

            .detail-title {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .container-premium {
                padding: 0 1rem;
            }

            .product-title-premium {
                font-size: 2rem;
            }

            .price-current {
                font-size: 2rem;
            }

            .features-premium {
                grid-template-columns: 1fr;
            }

            .gallery-actions {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .gallery-action-btn {
                padding: 0.875rem 1.25rem;
                font-size: 0.9rem;
            }

            .gallery-action-btn span {
                display: none;
            }

            .gallery-action-btn i {
                font-size: 1.25rem;
            }

            .option-card {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .thumbnails-premium {
                grid-template-columns: repeat(2, 1fr);
            }

            .details-section {
                padding: 3rem 0;
            }

            .details-section-title {
                margin-bottom: 3rem;
            }

            .details-section-title h2 {
                font-size: 2rem;
            }

            .details-section-title p {
                font-size: 1rem;
            }

            .detail-card {
                padding: 1.5rem;
            }

            .detail-header {
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .detail-icon {
                width: 3rem;
                height: 3rem;
                font-size: 1.125rem;
            }

            .detail-title {
                font-size: 1.25rem;
            }

            .detail-list li {
                padding: 0.75rem 0;
                font-size: 0.9rem;
            }

            .detail-list li:hover {
                margin: 0;
                padding: 0.75rem 0;
                background: none;
                transform: none;
            }
        }

        /* Sección de Productos Relacionados */
        .related-products-section {
            background: var(--cream);
            padding: 5rem 0;
            position: relative;
        }

        .related-products-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(163, 177, 138, 0.03) 50%, transparent 100%);
            pointer-events: none;
        }

        .related-section-title {
            text-align: center;
            margin-bottom: 4rem;
            position: relative;
            z-index: 1;
        }

        .related-section-title h2 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .related-section-title p {
            font-size: 1.25rem;
            color: var(--gray-600);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .related-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            position: relative;
            z-index: 1;
            align-items: stretch;
        }

        .related-product-card {
            background: var(--cream);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            transition: var(--transition);
            position: relative;
            border: 1px solid rgba(163, 177, 138, 0.1);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .related-product-card:hover {
            transform: translateY(-12px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .related-product-image {
            position: relative;
            overflow: hidden;
            height: 250px;
        }

        .related-product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .related-product-card:hover .related-product-image img {
            transform: scale(1.1);
        }

        .related-product-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(45, 62, 51, 0.8), rgba(58, 90, 64, 0.6));
            opacity: 0;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .related-product-card:hover .related-product-overlay {
            opacity: 1;
        }

        .related-product-overlay-content {
            text-align: center;
            color: white;
            transform: translateY(20px);
            transition: var(--transition);
        }

        .related-product-card:hover .related-product-overlay-content {
            transform: translateY(0);
        }

        .related-product-overlay-content .btn-view {
            background: white;
            color: var(--secondary);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .related-product-overlay-content .btn-view:hover {
            background: var(--accent);
            color: white;
            transform: scale(1.05);
        }

        .related-product-content {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .related-product-category {
            display: inline-block;
            background: rgba(163, 177, 138, 0.1);
            color: var(--secondary);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
        }

        .related-product-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.75rem;
            line-height: 1.3;
            min-height: 2.6rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .related-product-description {
            color: var(--gray-600);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 2.88rem;
            flex-shrink: 0;
        }

        .related-product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            flex-shrink: 0;
        }

        .related-product-price {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            font-weight: 800;
            color: var(--secondary);
        }

        .related-product-features {
            display: flex;
            gap: 0.5rem;
        }

        .related-product-feature {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: white;
            font-weight: 600;
        }

        .related-product-feature.promotion {
            background: linear-gradient(135deg, #FF6B6B, #FF5252);
        }

        .related-product-feature.new {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }

        .related-product-feature.bestseller {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }

        /* Responsive para productos relacionados */
        @media (max-width: 1024px) {
            .related-products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
                align-items: stretch;
            }

            .related-section-title h2 {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 768px) {
            .related-products-section {
                padding: 3rem 0;
            }

            .related-section-title {
                margin-bottom: 3rem;
            }

            .related-section-title h2 {
                font-size: 2rem;
            }

            .related-section-title p {
                font-size: 1rem;
            }

            .related-products-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                align-items: stretch;
            }

            .related-product-content {
                padding: 1.5rem;
            }

            .related-product-image {
                height: 200px;
            }
        }
    </style>
</head>

<body>
    <!-- Header Premium -->
    <header class="header-premium" id="header">
        <div class="container-premium">
            <div class="flex justify-between items-center py-4">
                <!-- Logo -->
                <a href="../index.html" class="flex items-center">
                    <img src="../images/logo.png" alt="Velas Starlight Logo" class="h-12 w-auto">
                </a>

                <!-- Navigation Desktop -->
                <nav class="hidden md:flex space-x-8 font-medium items-center">
                    <a href="../index.html"
                        class="text-gray-700 hover:text-dark-green transition-colors duration-300 flex items-center gap-2">
                        <i class="fa fa-home"></i>Inicio
                    </a>
                    <a href="productos.html"
                        class="text-gray-700 hover:text-dark-green transition-colors duration-300 flex items-center gap-2">
                        <i class="fa fa-cube"></i>Productos
                    </a>
                    <a href="contacto.html"
                        class="text-gray-700 hover:text-dark-green transition-colors duration-300 flex items-center gap-2">
                        <i class="fa fa-phone"></i>Contacto
                    </a>
                    <!-- Cart -->
                    <a href="carrito.html" class="relative text-dark-green transition-colors duration-300">
                        <i class="fa fa-shopping-cart text-xl"></i>
                        <span id="cart-count"
                            class="absolute -top-3 -right-3 bg-dark-green text-white text-xs w-5 h-5 flex items-center justify-center rounded-full">0</span>
                    </a>
                </nav>

                <!-- Mobile Menu Button -->
                <button id="menu-toggle" class="md:hidden text-dark-green text-2xl">
                    <i class="fa fa-bars"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu"
                class="hidden md:hidden bg-white shadow-xl border-t border-gray-100 absolute top-full left-0 w-full z-50">
                <div class="px-6 py-4 space-y-1">
                    <a href="../index.html"
                        class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-all duration-200 group">
                        <i
                            class="fa fa-home mr-3 text-dark-green group-hover:scale-110 transition-transform duration-200"></i>
                        <span class="font-medium">Inicio</span>
                    </a>
                    <a href="productos.html"
                        class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-all duration-200 group">
                        <i
                            class="fa fa-cube mr-3 text-dark-green group-hover:scale-110 transition-transform duration-200"></i>
                        <span class="font-medium">Productos</span>
                    </a>
                    <a href="contacto.html"
                        class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition-all duration-200 group">
                        <i
                            class="fa fa-phone mr-3 text-dark-green group-hover:scale-110 transition-transform duration-200"></i>
                        <span class="font-medium">Contacto</span>
                    </a>
                    <div class="border-t border-gray-200 my-2"></div>
                    <a href="carrito.html"
                        class="flex items-center justify-between px-4 py-3 text-dark-green bg-gray-50 rounded-lg">
                        <div class="flex items-center">
                            <i class="fa fa-shopping-cart mr-3"></i>
                            <span class="font-medium">Carrito</span>
                        </div>
                        <span id="cart-count-mobile"
                            class="bg-dark-green text-white text-xs w-5 h-5 flex items-center justify-center rounded-full">0</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Breadcrumb Premium -->
    <section class="breadcrumb-premium" style="margin-top: 80px;">
        <div class="container-premium">
            <nav>
                <a href="../index.html">
                    <i class="fa fa-home"></i> Inicio
                </a>
                <i class="fa fa-chevron-right text-gray-400"></i>
                <a href="productos.html">Productos</a>
                <i class="fa fa-chevron-right text-gray-400"></i>
                <span id="breadcrumb-product" class="current">Producto</span>
            </nav>
        </div>
    </section>

    <!-- Main Content -->
    <main>
        <div class="container-premium">
            <!-- Loading State -->
            <div id="product-loading-state" class="product-loading-state">
                <div class="product-loading-container">
                    <div class="candle-container">
                        <div class="candle-glow"></div>
                        <div class="candle-body">
                            <div class="candle-wax"></div>
                            <div class="candle-wick"></div>
                            <div class="candle-flame"></div>
                        </div>
                    </div>
                    <div class="product-loading-text">
                        Encendiendo la experiencia...
                    </div>
                </div>
            </div>

            <div id="product-content" class="product-layout hidden">
                <!-- Galería Premium -->
                <div class="gallery-premium">
                    <div class="main-image-container">
                        <img id="main-image" src="../images/productos/vela-1.jpg" alt="Producto" class="main-image">

                        <!-- Badge flotante -->
                        <div id="promo-badge" class="floating-badge hidden">
                            <i class="fa fa-fire"></i>
                            <span>2x1 Oferta</span>
                        </div>
                    </div>

                    <!-- Thumbnails -->
                    <div id="thumbnail-container" class="thumbnails-premium">
                        <!-- Se llenan dinámicamente -->
                    </div>

                    <!-- Botones de acción -->
                    <div class="gallery-actions">
                        <button id="whatsapp-btn" class="gallery-action-btn whatsapp-btn">
                            <i class="fab fa-whatsapp"></i>
                            <span>Preguntar por WhatsApp</span>
                        </button>
                        <button id="share-btn" class="gallery-action-btn share-btn">
                            <i class="fa fa-share-alt"></i>
                            <span>Compartir producto</span>
                        </button>
                    </div>
                </div>

                <!-- Panel de información Premium -->
                <div class="info-panel">
                    <!-- Status badges -->
                    <div class="status-badges">
                        <span id="product-category" class="badge badge-category">Categoría</span>
                        <span id="product-availability" class="badge badge-available">
                            <i class="fa fa-check-circle"></i> Disponible
                        </span>
                    </div>

                    <!-- Título -->
                    <h1 id="product-title" class="product-title-premium">
                        Nombre del Producto
                    </h1>

                    <!-- Descripción -->
                    <p id="product-description" class="product-description">
                        Descripción del producto que se carga dinámicamente...
                    </p>

                    <!-- Precio -->
                    <div class="price-section">
                        <span id="product-price" class="price-current">0.00 MXN</span>
                        <span id="product-original-price" class="price-original hidden">0.00 MXN</span>
                    </div>

                    <!-- Opciones de Tamaño -->
                    <div id="size-section" class="option-section">
                        <div class="section-header">
                            <i class="fa fa-ruler-combined section-icon"></i>
                            <h3 class="section-title">Selecciona el tamaño</h3>
                        </div>
                        <div class="size-dropdown">
                            <button id="size-selector" class="dropdown-button">
                                <span id="selected-size">Selecciona un tamaño</span>
                                <i class="fa fa-chevron-down dropdown-icon"></i>
                            </button>
                            <div id="size-dropdown-menu" class="dropdown-menu hidden">
                                <!-- Se llenan dinámicamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Opciones de Tipo de Cera -->
                    <div id="type-section" class="option-section hidden">
                        <div class="section-header">
                            <i id="type-section-icon" class="fa fa-fire section-icon"></i>
                            <h3 class="section-title">Selecciona el tipo de cera</h3>
                        </div>
                        <div class="type-dropdown">
                            <button id="type-selector" class="dropdown-button">
                                <span id="selected-type">Selecciona el tipo de cera</span>
                                <i class="fa fa-chevron-down dropdown-icon"></i>
                            </button>
                            <div id="type-dropdown-menu" class="dropdown-menu hidden">
                                <!-- Se llenan dinámicamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Opciones de Fragancia -->
                    <div id="fragrance-section" class="option-section hidden">
                        <div class="section-header">
                            <i class="fa fa-leaf section-icon"></i>
                            <h3 class="section-title">Selecciona la fragancia</h3>
                        </div>
                        <div class="fragrance-dropdown">
                            <button id="fragrance-selector" class="dropdown-button">
                                <span id="selected-fragrance">Selecciona una fragancia</span>
                                <i class="fa fa-chevron-down dropdown-icon"></i>
                            </button>
                            <div id="fragrance-dropdown-menu" class="dropdown-menu hidden">
                                <!-- Se llenan dinámicamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Control de cantidad -->
                    <div class="quantity-section">
                        <div class="section-header">
                            <i class="fa fa-shopping-basket section-icon"></i>
                            <h3 class="section-title">Cantidad</h3>
                        </div>
                        <div class="quantity-control">
                            <button id="qty-minus" class="qty-btn">
                                <i class="fa fa-minus"></i>
                            </button>
                            <span id="quantity-display" class="qty-display">1</span>
                            <button id="qty-plus" class="qty-btn">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Botones de acción -->
                    <div class="actions-section">
                        <button id="add-to-cart-btn" class="btn-premium btn-primary">
                            <i class="fa fa-shopping-cart"></i>
                            <span>Agregar al Carrito</span>
                        </button>

                        <button id="download-tech-sheet-btn" class="btn-premium btn-secondary">
                            <i class="fa fa-file-pdf"></i>
                            <span>Descargar Ficha Técnica</span>
                        </button>
                    </div>

                    <!-- Features Premium -->
                    <div class="features-premium">
                        <div class="feature-card">
                            <div class="feature-icon shipping">
                                <i class="fa fa-heart"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Hecho con amor</h4>
                                <p>Productos artesanales únicos</p>
                            </div>
                        </div>

                        <div class="feature-card">
                            <div class="feature-icon warranty">
                                <i class="fa fa-shield-alt"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Garantía Premium</h4>
                                <p>Productos artesanales de calidad</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sección de detalles -->
        <section class="details-section">
            <div class="container-premium">
                <!-- Título de sección elegante -->
                <div class="details-section-title">
                    <h2>Información Detallada</h2>
                    <p>Conoce todos los aspectos de nuestro producto artesanal, desde sus características únicas hasta
                        los cuidados especiales</p>
                </div>

                <div class="details-grid">
                    <!-- Características -->
                    <div class="detail-card">
                        <div class="detail-header">
                            <div class="detail-icon">
                                <i class="fa fa-star"></i>
                            </div>
                            <h3 class="detail-title">Características</h3>
                        </div>
                        <ul id="product-features" class="detail-list">
                            <!-- Se llenan dinámicamente -->
                        </ul>
                    </div>

                    <!-- Ingredientes -->
                    <div class="detail-card">
                        <div class="detail-header">
                            <div class="detail-icon">
                                <i class="fa fa-leaf"></i>
                            </div>
                            <h3 class="detail-title">Ingredientes</h3>
                        </div>
                        <ul id="product-ingredients" class="detail-list">
                            <!-- Se llenan dinámicamente -->
                        </ul>
                    </div>

                    <!-- Cuidados -->
                    <div class="detail-card">
                        <div class="detail-header">
                            <div class="detail-icon">
                                <i class="fa fa-heart"></i>
                            </div>
                            <h3 class="detail-title">Cuidados</h3>
                        </div>
                        <ul id="product-care" class="detail-list">
                            <!-- Se llenan dinámicamente -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Productos Relacionados -->
        <section class="related-products-section">
            <div class="container-premium">
                <!-- Título de sección elegante -->
                <div class="related-section-title">
                    <h2>Productos Relacionados</h2>
                    <p>Descubre otros productos artesanales que podrían interesarte</p>
                </div>

                <div id="related-products-grid" class="related-products-grid">
                    <!-- Se llenan dinámicamente -->
                </div>
            </div>
        </section>
        </div> <!-- Cierre de product-content -->
        </div> <!-- Cierre de container-premium -->
    </main>

    <!-- Footer -->
    <footer class="bg-gradient-to-br from-sage-green via-dark-green to-sage-green text-white relative overflow-hidden">
        <!-- Patrón de fondo -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute inset-0"
                style="background-image: url('data:image/svg+xml,<svg width=&quot;60&quot; height=&quot;60&quot; viewBox=&quot;0 0 60 60&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;><g fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;><g fill=&quot;%23ffffff&quot; fill-opacity=&quot;0.1&quot;><circle cx=&quot;30&quot; cy=&quot;30&quot; r=&quot;2&quot; /></g></g></svg>');">
            </div>
        </div>

        <div class="relative z-10">
            <!-- Contenido principal del footer -->
            <div class="container mx-auto px-6 py-16">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">

                    <!-- Logo y descripción -->
                    <div class="lg:col-span-2 space-y-6">
                        <div class="flex items-center space-x-3">
                            <img src="../images/logo.png" alt="Velas Starlight"
                                class="h-12 w-auto filter brightness-0 invert">
                        </div>
                        <p class="text-gray-300 leading-relaxed max-w-md">
                            Creamos experiencias sensoriales únicas con velas artesanales y productos de belleza
                            natural, elaborados con amor y dedicación para iluminar tu mundo.
                        </p>
                    </div>

                    <!-- Enlaces rápidos -->
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold mb-4 text-white">Enlaces Rápidos</h4>
                        <ul class="space-y-3">
                            <li><a href="../index.html"
                                    class="text-gray-300 hover:text-white transition-colors duration-300 flex items-center group">
                                    <i
                                        class="fa fa-home mr-2 group-hover:scale-110 transition-transform duration-300"></i>Inicio
                                </a></li>
                            <li><a href="productos.html"
                                    class="text-gray-300 hover:text-white transition-colors duration-300 flex items-center group">
                                    <i
                                        class="fa fa-cube mr-2 group-hover:scale-110 transition-transform duration-300"></i>Productos
                                </a></li>
                            <li><a href="contacto.html"
                                    class="text-gray-300 hover:text-white transition-colors duration-300 flex items-center group">
                                    <i
                                        class="fa fa-phone mr-2 group-hover:scale-110 transition-transform duration-300"></i>Contacto
                                </a></li>
                        </ul>
                    </div>

                    <!-- Contacto y redes sociales -->
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold mb-4 text-white">Conecta con Nosotros</h4>

                        <!-- Información de contacto -->
                        <div class="space-y-3 text-gray-300">
                            <a href="mailto:ventas@velasstarlight.com"
                                class="flex items-center space-x-3 hover:text-gray-200 transition-colors">
                                <i class="fa fa-envelope text-white"></i>
                                <span>ventas@velasstarlight.com</span>
                            </a>
                            <a href="tel:+525564682112"
                                class="flex items-center space-x-3 hover:text-gray-200 transition-colors">
                                <i class="fa fa-phone text-white"></i>
                                <span>5564682112</span>
                            </a>
                        </div>

                        <!-- Redes sociales -->
                        <div class="pt-4">
                            <h5 class="font-medium mb-3">Síguenos</h5>
                            <div class="flex space-x-4">
                                <a href="https://wa.me/5564682112" target="_blank"
                                    class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-sage-green hover:scale-110 transition-all duration-300 group">
                                    <i class="fab fa-whatsapp text-lg group-hover:text-white"></i>
                                </a>
                                <a href="https://www.instagram.com/velas_starlight/" target="_blank"
                                    class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-sage-green hover:scale-110 transition-all duration-300 group">
                                    <i class="fab fa-instagram text-lg group-hover:text-white"></i>
                                </a>
                                <a href="#" target="_blank"
                                    class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-sage-green hover:scale-110 transition-all duration-300 group">
                                    <i class="fab fa-facebook-f text-lg group-hover:text-white"></i>
                                </a>
                                <a href="#" target="_blank"
                                    class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-sage-green hover:scale-110 transition-all duration-300 group">
                                    <i class="fab fa-tiktok text-lg group-hover:text-white"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Línea divisoria -->
            <div class="border-t border-white/20"></div>

            <!-- Copyright y enlaces legales -->
            <div class="container mx-auto px-6 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="text-gray-300 text-sm">
                        <p>&copy; 2025 Velas Starlight. Todos los derechos reservados.</p>
                    </div>
                    <div class="flex items-center space-x-6 text-sm text-gray-300">
                        <a href="terminos.html" class="hover:text-white transition-colors duration-300">Términos
                            y Condiciones</a>
                        <span class="text-gray-500">|</span>
                        <a href="politicas.html" class="hover:text-white transition-colors duration-300">Política
                            de Privacidad</a>
                        <span class="text-gray-500">|</span>
                        <span class="flex items-center space-x-1">
                            <i class="fa fa-heart text-red-400"></i>
                            <span>Hecho con amor</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="../js/productos-data.js"></script>
    <script src="../js/mobile-menu-clean.js"></script>

    <!-- jsPDF para generar PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Generador profesional de ficha técnica -->
    <script src="../js/tech-sheet-professional.js"></script>

    <!-- Script principal -->
    <script>
        // Variables globales
        let currentProduct = null;
        let selectedSize = null;
        let selectedFragrance = null;
        let selectedType = null;
        let quantity = 1;

        // Inicialización
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM cargado, iniciando producto...');

            // Mostrar loading state
            showProductLoading();

            // Intentar inicializar inmediatamente
            if (typeof productosData !== 'undefined' || typeof window.productosData !== 'undefined') {
                // Simular un pequeño delay para mostrar la animación
                setTimeout(() => {
                    initializeProduct();
                    hideProductLoading();
                }, 800);
            } else {
                // Si no están disponibles, esperar un poco más
                console.log('Datos no disponibles inmediatamente, esperando...');
                setTimeout(() => {
                    if (typeof productosData !== 'undefined' || typeof window.productosData !== 'undefined') {
                        initializeProduct();
                        hideProductLoading();
                    } else {
                        console.error('Datos de productos no disponibles después de esperar');
                        hideProductLoading();
                        showError('Error: No se pudieron cargar los datos de productos');
                    }
                }, 1500);
            }

            setupEventListeners();
            updateCartCount();
            setupScrollEffects();
        });

        // Efectos de scroll para header
        function setupScrollEffects() {
            const header = document.getElementById('header');
            let lastScrollY = window.scrollY;

            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;

                if (currentScrollY > 100) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }

                lastScrollY = currentScrollY;
            });
        }

        // Inicializar producto desde URL
        function initializeProduct() {
            // Esperar un poco para asegurar que los datos estén cargados
            setTimeout(() => {
                const urlParams = new URLSearchParams(window.location.search);
                const productId = urlParams.get('id');

                console.log('Inicializando producto con ID:', productId);

                // Verificar múltiples fuentes de datos
                let dataSource = null;
                if (typeof productosData !== 'undefined' && productosData) {
                    dataSource = productosData;
                    console.log('Usando productosData directamente');
                } else if (typeof window.productosData !== 'undefined' && window.productosData) {
                    dataSource = window.productosData;
                    console.log('Usando window.productosData');
                } else {
                    console.error('No se encontraron datos de productos');
                    showError('Error: No se pudieron cargar los datos de productos');
                    return;
                }

                if (productId && dataSource && dataSource.length > 0) {
                    console.log('Buscando producto en', dataSource.length, 'productos');
                    currentProduct = dataSource.find(p => p.id == parseInt(productId));
                    if (currentProduct) {
                        console.log('Producto encontrado:', currentProduct.title);
                        loadProductData(currentProduct);
                    } else {
                        console.error('Producto no encontrado con ID:', productId);
                        showError('Producto no encontrado');
                    }
                } else {
                    console.error('ID inválido o datos no disponibles');
                    showError('Error al cargar el producto');
                }
            }, 100); // Esperar 100ms para que se carguen los datos
        }

        // Actualizar SEO dinámicamente
        function updateSEO(product) {
            const currentUrl = window.location.href;
            const baseUrl = window.location.origin;
            const productUrl = currentUrl;
            const imageUrl = product.image.startsWith('http') ? product.image : baseUrl + '/' + product.image.replace('../', '');

            // Obtener precio mínimo
            let minPrice = 0;
            if (product.sizes && product.sizes.length > 0) {
                minPrice = Math.min(...product.sizes.map(size => size.price));
            }

            // Crear descripción SEO optimizada
            const seoDescription = `${product.title} - ${product.description.substring(0, 150)}... Desde ${minPrice} MXN. Velas artesanales de alta calidad en Velas Starlight.`;

            // Crear keywords dinámicas
            const keywords = [
                product.title.toLowerCase(),
                product.category.toLowerCase(),
                product.type ? product.type.toLowerCase() : '',
                'velas artesanales',
                'productos belleza',
                'méxico',
                'starlight'
            ].filter(Boolean).join(', ');

            // Actualizar meta tags básicos
            document.getElementById('page-title').textContent = `${product.title} | Velas Starlight`;
            document.getElementById('page-description').setAttribute('content', seoDescription);
            document.getElementById('page-keywords').setAttribute('content', keywords);

            // Actualizar canonical URL
            document.getElementById('canonical-url').setAttribute('href', productUrl);

            // Actualizar Open Graph
            document.getElementById('og-title').setAttribute('content', `${product.title} | Velas Starlight`);
            document.getElementById('og-description').setAttribute('content', seoDescription);
            document.getElementById('og-image').setAttribute('content', imageUrl);
            document.getElementById('og-url').setAttribute('content', productUrl);

            // Actualizar Twitter Cards
            document.getElementById('twitter-title').setAttribute('content', `${product.title} | Velas Starlight`);
            document.getElementById('twitter-description').setAttribute('content', seoDescription);
            document.getElementById('twitter-image').setAttribute('content', imageUrl);

            // Actualizar meta tags de producto
            document.getElementById('product-availability').setAttribute('content', product.available ? 'in stock' : 'out of stock');
            document.getElementById('product-price-meta').setAttribute('content', minPrice.toString());
            document.getElementById('product-category-meta').setAttribute('content', product.category);

            // Actualizar datos estructurados JSON-LD
            const structuredData = {
                "@context": "https://schema.org/",
                "@type": "Product",
                "name": product.title,
                "description": product.description,
                "image": imageUrl,
                "brand": {
                    "@type": "Brand",
                    "name": "Velas Starlight"
                },
                "manufacturer": {
                    "@type": "Organization",
                    "name": "Velas Starlight"
                },
                "category": product.category,
                "offers": {
                    "@type": "Offer",
                    "url": productUrl,
                    "priceCurrency": "MXN",
                    "price": minPrice.toString(),
                    "availability": product.available ? "https://schema.org/InStock" : "https://schema.org/OutOfStock",
                    "seller": {
                        "@type": "Organization",
                        "name": "Velas Starlight",
                        "url": baseUrl
                    }
                },
                "aggregateRating": {
                    "@type": "AggregateRating",
                    "ratingValue": "5",
                    "reviewCount": "1"
                }
            };

            // Si el producto tiene características, agregarlas
            if (product.characteristics && product.characteristics.length > 0) {
                structuredData.additionalProperty = product.characteristics.map(char => ({
                    "@type": "PropertyValue",
                    "name": "Característica",
                    "value": char
                }));
            }

            // Si el producto tiene fragancias, agregarlas
            if (product.fragrances && product.fragrances.length > 0) {
                structuredData.additionalProperty = structuredData.additionalProperty || [];
                structuredData.additionalProperty.push({
                    "@type": "PropertyValue",
                    "name": "Fragancias disponibles",
                    "value": product.fragrances.join(', ')
                });
            }

            // Actualizar el script de datos estructurados
            document.getElementById('product-structured-data').textContent = JSON.stringify(structuredData, null, 2);

            // Agregar breadcrumbs estructurados
            const breadcrumbData = {
                "@context": "https://schema.org",
                "@type": "BreadcrumbList",
                "itemListElement": [
                    {
                        "@type": "ListItem",
                        "position": 1,
                        "name": "Inicio",
                        "item": baseUrl
                    },
                    {
                        "@type": "ListItem",
                        "position": 2,
                        "name": "Productos",
                        "item": baseUrl + "/pages/productos.html"
                    },
                    {
                        "@type": "ListItem",
                        "position": 3,
                        "name": product.title,
                        "item": productUrl
                    }
                ]
            };

            // Crear o actualizar script de breadcrumbs
            let breadcrumbScript = document.getElementById('breadcrumb-structured-data');
            if (!breadcrumbScript) {
                breadcrumbScript = document.createElement('script');
                breadcrumbScript.type = 'application/ld+json';
                breadcrumbScript.id = 'breadcrumb-structured-data';
                document.head.appendChild(breadcrumbScript);
            }
            breadcrumbScript.textContent = JSON.stringify(breadcrumbData, null, 2);

            console.log('SEO actualizado para:', product.title);
        }

        // Cargar datos del producto
        function loadProductData(product) {
            console.log('Cargando datos del producto:', product.title);

            // Actualizar SEO dinámicamente
            updateSEO(product);

            // Actualizar título de la página
            document.title = `${product.title} | Velas Starlight`;

            // Breadcrumb
            const breadcrumbEl = document.getElementById('breadcrumb-product');
            if (breadcrumbEl) {
                breadcrumbEl.textContent = product.title;
            } else {
                console.warn('Elemento breadcrumb-product no encontrado');
            }

            // Información básica
            const categoryEl = document.getElementById('product-category');
            const titleEl = document.getElementById('product-title');
            const descriptionEl = document.getElementById('product-description');

            if (categoryEl) categoryEl.textContent = product.category;
            else console.warn('Elemento product-category no encontrado');

            if (titleEl) titleEl.textContent = product.title;
            else console.warn('Elemento product-title no encontrado');

            if (descriptionEl) descriptionEl.textContent = product.description;
            else console.warn('Elemento product-description no encontrado');

            // Disponibilidad
            const availabilityEl = document.getElementById('product-availability');
            if (product.available) {
                availabilityEl.innerHTML = '<i class="fa fa-check-circle"></i> Disponible';
                availabilityEl.className = 'badge badge-available';
            } else {
                availabilityEl.innerHTML = '<i class="fa fa-times-circle"></i> No Disponible';
                availabilityEl.className = 'badge';
                availabilityEl.style.background = '#FFEBEE';
                availabilityEl.style.color = '#C62828';
            }

            // Imagen principal
            const mainImage = document.getElementById('main-image');
            mainImage.src = product.image;
            mainImage.alt = product.title;



            // Cargar opciones de tamaño
            console.log('Cargando opciones de tamaño...');
            loadSizeOptions(product);

            // Cargar tipo de producto (siempre existe en la nueva estructura)
            console.log('Cargando tipo de producto...');
            loadTypeOptions(product);

            // Cargar fragancias o variantes si existen
            if (product.fragrances && product.fragrances.length > 0) {
                console.log('Cargando fragancias...');
                loadFragranceOptions(product);
            } else if (product.variants && product.variants.length > 0) {
                console.log('Cargando variantes...');
                loadVariantOptions(product);
            }

            // Cargar información adicional
            console.log('Cargando características...');
            loadProductFeatures(product);
            console.log('Cargando ingredientes...');
            loadProductIngredients(product);
            console.log('Cargando cuidados...');
            loadProductCare(product);

            // Cargar productos relacionados
            console.log('Cargando productos relacionados...');
            loadRelatedProducts(product);

            // Cargar thumbnails si existen
            loadThumbnails(product);

            // Cargar productos relacionados
            loadRelatedProducts(product);
        }

        // Cargar opciones de tamaño en dropdown
        function loadSizeOptions(product) {
            console.log('loadSizeOptions: Iniciando carga de tamaños');
            const container = document.getElementById('size-dropdown-menu');

            if (!container) {
                console.error('loadSizeOptions: Elemento size-dropdown-menu no encontrado');
                return;
            }

            container.innerHTML = '';
            console.log('loadSizeOptions: Tamaños disponibles:', product.sizes);

            if (product.sizes && product.sizes.length > 0) {
                product.sizes.forEach((size, index) => {
                    const option = document.createElement('div');
                    option.className = 'dropdown-item';
                    option.dataset.sizeIndex = index;

                    option.innerHTML = `
                        <div class="size-item-content">
                            <div class="size-item-info">
                                <div class="size-item-label">${size.label}</div>
                                <div class="size-item-description">Tamaño perfecto para cualquier ocasión</div>
                            </div>
                            <div class="size-item-price">${size.price} MXN</div>
                        </div>
                    `;

                    option.addEventListener('click', () => selectSize(index));
                    container.appendChild(option);
                });

                // Configurar el dropdown
                setupSizeDropdown();

                // Seleccionar el primer tamaño por defecto
                selectSize(0);
            }
        }

        // Configurar funcionalidad del dropdown de tamaños
        function setupSizeDropdown() {
            const selector = document.getElementById('size-selector');
            const menu = document.getElementById('size-dropdown-menu');

            selector.addEventListener('click', () => {
                const isOpen = !menu.classList.contains('hidden');

                if (isOpen) {
                    menu.classList.add('hidden');
                    selector.classList.remove('active');
                } else {
                    menu.classList.remove('hidden');
                    selector.classList.add('active');
                }
            });

            // Cerrar dropdown al hacer click fuera
            document.addEventListener('click', (e) => {
                if (!selector.contains(e.target) && !menu.contains(e.target)) {
                    menu.classList.add('hidden');
                    selector.classList.remove('active');
                }
            });
        }

        // Cargar opciones de tipo de producto
        function loadTypeOptions(product) {
            const section = document.getElementById('type-section');
            const sectionTitle = section.querySelector('.section-title');
            const sectionIcon = document.getElementById('type-section-icon');
            const typeDropdown = section.querySelector('.type-dropdown');

            section.classList.remove('hidden');

            // Para productos de belleza
            if (product.category === 'Belleza') {
                sectionTitle.textContent = 'Hecho con amor';
                sectionIcon.className = 'fa fa-heart section-icon';

                typeDropdown.innerHTML = `
                    <div class="option-card selected" style="cursor: default;">
                        <div class="option-info">
                            <h4>${product.type}</h4>
                            <p>${getTypeDescription(product.type)}</p>
                        </div>
                        <div class="option-icon">
                            <i class="fa ${getTypeIcon(product.type)}" style="color: ${getTypeColor(product.type)};"></i>
                        </div>
                    </div>
                `;
            } else {
                // Para velas
                sectionTitle.textContent = 'Tipo de cera';
                sectionIcon.className = 'fa fa-fire section-icon';

                typeDropdown.innerHTML = `
                    <div class="option-card selected" style="cursor: default;">
                        <div class="option-info">
                            <h4>${product.type}</h4>
                            <p>${getTypeDescription(product.type)}</p>
                        </div>
                        <div class="option-icon">
                            <i class="fa ${getTypeIcon(product.type)}" style="color: ${getTypeColor(product.type)};"></i>
                        </div>
                    </div>
                `;
            }

            // Establecer tipo seleccionado
            selectedType = product.type;
        }





        // Cargar opciones de fragancia en dropdown
        function loadFragranceOptions(product) {
            const section = document.getElementById('fragrance-section');
            const container = document.getElementById('fragrance-dropdown-menu');
            const selector = document.getElementById('fragrance-selector');

            section.classList.remove('hidden');
            container.innerHTML = '';

            product.fragrances.forEach((fragrance, index) => {
                const option = document.createElement('div');
                option.className = 'dropdown-item';
                option.dataset.fragranceIndex = index;

                option.innerHTML = `
                    <div class="dropdown-item-info">
                        <h4>${fragrance}</h4>
                        <p>Fragancia natural y duradera</p>
                    </div>
                    <div class="dropdown-item-icon">
                        <i class="fa fa-leaf"></i>
                    </div>
                `;

                option.addEventListener('click', () => selectFragrance(index));
                container.appendChild(option);
            });

            // Configurar el dropdown
            setupFragranceDropdown();

            // Seleccionar la primera fragancia por defecto
            selectFragrance(0);
        }

        // Cargar opciones de variantes para productos de belleza
        function loadVariantOptions(product) {
            const section = document.getElementById('fragrance-section');
            const container = document.getElementById('fragrance-dropdown-menu');
            const sectionTitle = section.querySelector('.section-title');
            const sectionIcon = section.querySelector('.section-icon');
            const selectorSpan = document.getElementById('selected-fragrance');

            // Actualizar título para variantes
            sectionTitle.textContent = 'Selecciona la variante';
            sectionIcon.className = 'fa fa-spa section-icon';
            selectorSpan.textContent = 'Selecciona una variante';

            section.classList.remove('hidden');
            container.innerHTML = '';

            product.variants.forEach((variant, index) => {
                const option = document.createElement('div');
                option.className = 'dropdown-item';
                option.dataset.fragranceIndex = index;

                option.innerHTML = `
                    <div class="dropdown-item-info">
                        <h4>${variant}</h4>
                        <p>Variante especializada</p>
                    </div>
                    <div class="dropdown-item-icon">
                        <i class="fa fa-spa"></i>
                    </div>
                `;

                option.addEventListener('click', () => selectFragrance(index));
                container.appendChild(option);
            });

            // Configurar el dropdown
            setupFragranceDropdown();

            // Seleccionar la primera variante por defecto
            selectFragrance(0);
        }

        // Configurar funcionalidad del dropdown
        function setupFragranceDropdown() {
            const selector = document.getElementById('fragrance-selector');
            const menu = document.getElementById('fragrance-dropdown-menu');

            selector.addEventListener('click', () => {
                const isOpen = !menu.classList.contains('hidden');

                if (isOpen) {
                    menu.classList.add('hidden');
                    selector.classList.remove('active');
                } else {
                    menu.classList.remove('hidden');
                    selector.classList.add('active');
                }
            });

            // Cerrar dropdown al hacer click fuera
            document.addEventListener('click', (e) => {
                if (!selector.contains(e.target) && !menu.contains(e.target)) {
                    menu.classList.add('hidden');
                    selector.classList.remove('active');
                }
            });
        }

        // Seleccionar tamaño
        function selectSize(index) {
            // Remover selección anterior
            document.querySelectorAll('#size-dropdown-menu .dropdown-item').forEach(item => {
                item.classList.remove('selected');
            });

            // Seleccionar nuevo
            const selectedItem = document.querySelector(`#size-dropdown-menu .dropdown-item[data-size-index="${index}"]`);
            selectedItem.classList.add('selected');

            // Actualizar el texto del selector
            const selectedSizeText = document.getElementById('selected-size');
            const size = currentProduct.sizes[index];
            selectedSizeText.textContent = `${size.label} - ${size.price} MXN`;

            // Cerrar dropdown
            const menu = document.getElementById('size-dropdown-menu');
            const selector = document.getElementById('size-selector');
            if (menu) menu.classList.add('hidden');
            if (selector) selector.classList.remove('active');







            selectedSize = currentProduct.sizes[index];
            updatePrice();
        }

        // Seleccionar fragancia
        function selectFragrance(index) {
            // Remover selección anterior
            document.querySelectorAll('#fragrance-dropdown-menu .dropdown-item').forEach(item => {
                item.classList.remove('selected');
            });

            // Seleccionar nuevo
            const selectedItem = document.querySelector(`#fragrance-dropdown-menu .dropdown-item[data-fragrance-index="${index}"]`);
            if (selectedItem) {
                selectedItem.classList.add('selected');
            }

            // Actualizar el texto del selector
            const selectedFragranceText = document.getElementById('selected-fragrance');
            const fragrance = currentProduct.fragrances ? currentProduct.fragrances[index] : currentProduct.variants[index];
            if (selectedFragranceText && fragrance) {
                selectedFragranceText.textContent = fragrance;
            }

            // Cerrar dropdown
            const menu = document.getElementById('fragrance-dropdown-menu');
            const selector = document.getElementById('fragrance-selector');
            if (menu) menu.classList.add('hidden');
            if (selector) selector.classList.remove('active');

            selectedFragrance = fragrance;
        }

        // Actualizar precio
        function updatePrice() {
            if (selectedSize) {
                const priceEl = document.getElementById('product-price');
                let finalPrice = selectedSize.price * quantity;



                priceEl.textContent = `${finalPrice.toFixed(2)} MXN`;
            }
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Control de cantidad
            document.getElementById('qty-minus').addEventListener('click', () => {
                if (quantity > 1) {
                    quantity--;
                    document.getElementById('quantity-display').textContent = quantity;
                    updatePrice();
                }
            });

            document.getElementById('qty-plus').addEventListener('click', () => {
                quantity++;
                document.getElementById('quantity-display').textContent = quantity;
                updatePrice();
            });

            // Agregar al carrito
            document.getElementById('add-to-cart-btn').addEventListener('click', addToCart);

            // Descargar ficha técnica
            document.getElementById('download-tech-sheet-btn').addEventListener('click', downloadTechSheet);

            // Botones de galería
            document.getElementById('whatsapp-btn').addEventListener('click', openWhatsApp);
            document.getElementById('share-btn').addEventListener('click', shareProduct);
        }

        // Agregar al carrito
        function addToCart() {
            if (!currentProduct || !selectedSize) {
                showToast('Por favor selecciona un tamaño', 'error');
                return;
            }

            const cartItem = {
                id: currentProduct.id,
                title: currentProduct.title,
                image: currentProduct.image,
                price: selectedSize.price,
                size: selectedSize.label,
                fragrance: selectedFragrance || 'Sin fragancia',
                type: selectedType || 'Sin especificar',
                quantity: quantity
            };

            // Obtener carrito actual
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');

            // Buscar si ya existe el producto con las mismas características
            const existingIndex = cart.findIndex(item =>
                item.id === cartItem.id &&
                item.size === cartItem.size &&
                item.fragrance === cartItem.fragrance &&
                item.type === cartItem.type
            );

            if (existingIndex >= 0) {
                cart[existingIndex].quantity += cartItem.quantity;
            } else {
                cart.push(cartItem);
            }

            // Guardar carrito
            localStorage.setItem('cart', JSON.stringify(cart));

            // Actualizar contador
            updateCartCount();

            // Mostrar confirmación con información detallada
            const message = existingIndex >= 0
                ? `${cartItem.title} (${cartItem.size}) - Cantidad actualizada en el carrito`
                : `${cartItem.title} (${cartItem.size}) - Agregado al carrito exitosamente`;
            showCartToast(message, cartItem.quantity, cart.reduce((sum, item) => sum + item.quantity, 0));
        }

        // Descargar ficha técnica
        function downloadTechSheet() {
            if (!currentProduct) {
                showToast('Error: Producto no disponible', 'error');
                return;
            }

            if (window.generateTechSheet) {
                window.generateTechSheet(currentProduct);
            } else {
                showToast('Error: Generador de PDF no disponible', 'error');
            }
        }

        // Actualizar contador del carrito
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);

            document.querySelectorAll('#cart-count, #cart-count-mobile').forEach(el => {
                el.textContent = totalItems;
            });
        }

        // Cargar características del producto
        function loadProductFeatures(product) {
            console.log('loadProductFeatures: Cargando características');
            const container = document.getElementById('product-features');

            if (!container) {
                console.error('loadProductFeatures: Elemento product-features no encontrado');
                return;
            }

            container.innerHTML = '';
            console.log('loadProductFeatures: Características disponibles:', product.characteristics);

            // Usar las características del producto o valores por defecto
            const characteristics = product.characteristics || [
                'Producto artesanal de alta calidad',
                'Elaborado con ingredientes premium',
                'Diseño único y exclusivo'
            ];

            characteristics.forEach(characteristic => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fa fa-star"></i> ${characteristic}`;
                container.appendChild(li);
            });

            // Agregar información adicional para velas
            if (product.category === 'Vela') {
                if (product.duration) {
                    const durationLi = document.createElement('li');
                    durationLi.innerHTML = `<i class="fa fa-clock"></i> Duración: ${product.duration}`;
                    container.appendChild(durationLi);
                }

                if (product.colors && product.colors.length > 0) {
                    const colorsLi = document.createElement('li');
                    colorsLi.innerHTML = `<i class="fa fa-palette"></i> Colores: ${product.colors.join(', ')}`;
                    container.appendChild(colorsLi);
                }
            }


        }

        // Cargar ingredientes
        function loadProductIngredients(product) {
            console.log('loadProductIngredients: Cargando ingredientes');
            const container = document.getElementById('product-ingredients');

            if (!container) {
                console.error('loadProductIngredients: Elemento product-ingredients no encontrado');
                return;
            }

            container.innerHTML = '';
            console.log('loadProductIngredients: Ingredientes disponibles:', product.ingredients);

            // Usar los ingredientes del producto o valores por defecto
            const ingredients = product.ingredients || [
                'Ingredientes naturales de alta calidad',
                'Sin aditivos químicos dañinos',
                'Formulación artesanal'
            ];

            ingredients.forEach(ingredient => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fa fa-check"></i> ${ingredient}`;
                container.appendChild(li);
            });
        }

        // Cargar cuidados
        function loadProductCare(product) {
            console.log('loadProductCare: Cargando cuidados');
            const container = document.getElementById('product-care');

            if (!container) {
                console.error('loadProductCare: Elemento product-care no encontrado');
                return;
            }

            container.innerHTML = '';
            console.log('loadProductCare: Cuidados disponibles:', product.care);

            // Usar los cuidados del producto o valores por defecto
            const care = product.care || [
                'Seguir las instrucciones de uso',
                'Mantener fuera del alcance de niños',
                'Conservar en lugar fresco y seco'
            ];

            care.forEach(careItem => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fa fa-info-circle"></i> ${careItem}`;
                container.appendChild(li);
            });
        }

        // Funciones auxiliares para tipos de producto
        function getTypeDescription(type) {
            const descriptions = {
                'Soya': 'Cera natural, combustión limpia y duradera',
                'Parafina': 'Cera tradicional, fragancia intensa',
                'Origen Natural': 'Elaborado con ingredientes naturales'
            };
            return descriptions[type] || 'Producto de alta calidad';
        }

        function getTypeIcon(type) {
            const icons = {
                'Soya': 'fa-leaf',
                'Parafina': 'fa-fire',
                'Origen Natural': 'fa-spa'
            };
            return icons[type] || 'fa-star';
        }

        function getTypeColor(type) {
            const colors = {
                'Soya': '#4CAF50',
                'Parafina': '#FF9800',
                'Origen Natural': '#2196F3'
            };
            return colors[type] || '#9E9E9E';
        }

        // Cargar thumbnails
        function loadThumbnails(product) {
            const container = document.getElementById('thumbnail-container');
            container.innerHTML = '';

            // Imagen principal como primer thumbnail
            const mainThumb = document.createElement('div');
            mainThumb.className = 'thumbnail active';
            mainThumb.innerHTML = `<img src="${product.image}" alt="${product.title}">`;
            mainThumb.addEventListener('click', () => changeMainImage(product.image, mainThumb));
            container.appendChild(mainThumb);

            // Imágenes adicionales si existen
            if (product.additionalImages) {
                product.additionalImages.forEach((img, index) => {
                    const thumb = document.createElement('div');
                    thumb.className = 'thumbnail';
                    thumb.innerHTML = `<img src="${img}" alt="${product.title} - Vista ${index + 2}">`;
                    thumb.addEventListener('click', () => changeMainImage(img, thumb));
                    container.appendChild(thumb);
                });
            }
        }

        // Cambiar imagen principal
        function changeMainImage(src, thumbElement) {
            document.getElementById('main-image').src = src;

            // Actualizar thumbnail activo
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            thumbElement.classList.add('active');
        }

        // Mostrar toast notification
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast-premium ${type}`;

            const icons = {
                success: 'fa-check-circle',
                error: 'fa-times-circle',
                info: 'fa-info-circle'
            };

            // Detectar si es un mensaje de carrito para usar ícono especial
            const isCartMessage = message.includes('carrito');
            const iconToUse = isCartMessage && type === 'success' ? 'fa-shopping-cart' : (icons[type] || icons.info);

            toast.innerHTML = `
                <i class="fa ${iconToUse}" style="font-size: 1.25rem;"></i>
                <div style="flex: 1;">
                    <span style="font-weight: 600; display: block; margin-bottom: 0.25rem;">${isCartMessage && type === 'success' ? '¡Producto agregado!' : 'Notificación'}</span>
                    <span style="font-size: 0.9rem; opacity: 0.9;">${message}</span>
                </div>
                <button onclick="this.parentElement.remove()" style="margin-left: auto; background: none; border: none; color: inherit; cursor: pointer; padding: 0.5rem; border-radius: 50%; transition: background 0.2s;">
                    <i class="fa fa-times"></i>
                </button>
            `;

            container.appendChild(toast);

            // Auto-remove
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 4000);
        }

        // Toast especializado para carrito
        function showCartToast(message, itemQuantity, totalItems) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast-premium success cart-toast';

            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 1rem; width: 100%;">
                    <div style="background: #4CAF50; color: white; width: 3rem; height: 3rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <i class="fa fa-shopping-cart" style="font-size: 1.25rem;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 700; color: #2E7D32; margin-bottom: 0.25rem; font-size: 1rem;">
                            ¡Producto agregado al carrito!
                        </div>
                        <div style="font-size: 0.875rem; color: #666; margin-bottom: 0.5rem;">
                            ${message}
                        </div>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <span style="font-size: 0.75rem; background: #E8F5E8; color: #2E7D32; padding: 0.25rem 0.5rem; border-radius: 12px; font-weight: 600;">
                                Total: ${totalItems} ${totalItems === 1 ? 'producto' : 'productos'}
                            </span>
                            <a href="carrito.html" style="font-size: 0.75rem; color: #4CAF50; text-decoration: none; font-weight: 600; padding: 0.25rem 0.5rem; border: 1px solid #4CAF50; border-radius: 12px; transition: all 0.2s;">
                                Ver carrito
                            </a>
                        </div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: #666; cursor: pointer; padding: 0.5rem; border-radius: 50%; transition: background 0.2s; flex-shrink: 0;">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
            `;

            container.appendChild(toast);

            // Efecto de vibración sutil en el botón del carrito
            const cartButtons = document.querySelectorAll('#cart-count, #cart-count-mobile');
            cartButtons.forEach(btn => {
                btn.style.animation = 'bounce 0.6s ease-in-out';
                setTimeout(() => {
                    btn.style.animation = '';
                }, 600);
            });

            // Auto-remove después de 5 segundos
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.style.animation = 'slideOut 0.3s ease-in';
                    setTimeout(() => {
                        if (toast.parentElement) {
                            toast.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }

        // Generar URL amigable para SEO
        function generateSEOUrl(product) {
            const baseUrl = window.location.origin + window.location.pathname;
            const slug = product.title
                .toLowerCase()
                .replace(/[áàäâ]/g, 'a')
                .replace(/[éèëê]/g, 'e')
                .replace(/[íìïî]/g, 'i')
                .replace(/[óòöô]/g, 'o')
                .replace(/[úùüû]/g, 'u')
                .replace(/[ñ]/g, 'n')
                .replace(/[^a-z0-9]/g, '-')
                .replace(/-+/g, '-')
                .replace(/^-|-$/g, '');

            return `${baseUrl}?producto=${slug}&id=${product.id}`;
        }

        // Mejorar función de compartir con SEO
        function shareProductSEO(product) {
            const productUrl = generateSEOUrl(product);
            const imageUrl = product.image.startsWith('http') ? product.image : window.location.origin + '/' + product.image.replace('../', '');

            let minPrice = 0;
            if (product.sizes && product.sizes.length > 0) {
                minPrice = Math.min(...product.sizes.map(size => size.price));
            }

            const shareData = {
                title: `${product.title} | Velas Starlight`,
                text: `${product.description.substring(0, 100)}... Desde ${minPrice} MXN`,
                url: productUrl
            };

            if (navigator.share) {
                navigator.share(shareData)
                    .then(() => console.log('Producto compartido exitosamente'))
                    .catch((error) => console.log('Error sharing:', error));
            } else {
                // Fallback para navegadores que no soportan Web Share API
                const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(`¡Mira este producto! ${shareData.title}\n\n${shareData.text}\n\n${shareData.url}`)}`;
                window.open(whatsappUrl, '_blank');
            }
        }

        // Funciones de Loading State
        function showProductLoading() {
            const loadingState = document.getElementById('product-loading-state');
            const productContent = document.getElementById('product-content');

            if (loadingState) {
                loadingState.style.display = 'flex';
            }
            if (productContent) {
                productContent.classList.add('hidden');
            }
        }

        function hideProductLoading() {
            const loadingState = document.getElementById('product-loading-state');
            const productContent = document.getElementById('product-content');

            if (loadingState) {
                loadingState.style.animation = 'fadeOut 0.5s ease-out forwards';
                setTimeout(() => {
                    loadingState.style.display = 'none';
                }, 500);
            }

            if (productContent) {
                productContent.classList.remove('hidden');
                // Trigger animations
                setTimeout(() => {
                    productContent.style.opacity = '1';
                    productContent.style.transform = 'translateY(0)';
                }, 100);
            }
        }

        // Cargar productos relacionados aleatorios
        function loadRelatedProducts(currentProduct) {
            console.log('loadRelatedProducts: Cargando productos relacionados');
            const container = document.getElementById('related-products-grid');

            if (!container) {
                console.error('loadRelatedProducts: Elemento related-products-grid no encontrado');
                return;
            }

            container.innerHTML = '';

            const dataSource = (typeof productosData !== 'undefined') ? productosData : window.productosData;

            if (!dataSource || dataSource.length <= 1) {
                return;
            }

            // Filtrar productos (excluir el actual)
            const otherProducts = dataSource.filter(p => p.id !== currentProduct.id);

            // Mezclar array y tomar 4 productos aleatorios
            const shuffled = otherProducts.sort(() => 0.5 - Math.random());
            const relatedProducts = shuffled.slice(0, 4);

            relatedProducts.forEach(product => {
                const productCard = createRelatedProductCard(product);
                container.appendChild(productCard);
            });
        }

        // Crear tarjeta de producto relacionado
        function createRelatedProductCard(product) {
            const card = document.createElement('div');
            card.className = 'related-product-card';
            card.addEventListener('click', () => {
                window.location.href = `producto - detalle.html ? id = ${product.id} `;
            });

            // Obtener precio mínimo
            let minPrice = 0;
            if (product.sizes && product.sizes.length > 0) {
                minPrice = Math.min(...product.sizes.map(size => size.price));
            }

            // Crear badges de características
            let features = '';
            if (product.new) {
                features += '<div class="related-product-feature new">NEW</div>';
            }
            if (product.bestseller) {
                features += '<div class="related-product-feature bestseller">★</div>';
            }

            // Truncar descripción
            const shortDescription = product.description.length > 100
                ? product.description.substring(0, 100) + '...'
                : product.description;

            card.innerHTML = `
                <div class="related-product-image">
                    <img src="${product.image}" alt="${product.title}" loading="lazy">
                    <div class="related-product-overlay">
                        <div class="related-product-overlay-content">
                            <button class="btn-view" onclick="event.stopPropagation(); window.location.href='producto-detalle.html?id=${product.id}'">
                                Ver Producto
                            </button>
                        </div>
                    </div>
                </div>
                <div class="related-product-content">
                    <div class="related-product-category">${product.category}</div>
                    <h3 class="related-product-title">${product.title}</h3>
                    <p class="related-product-description">${shortDescription}</p>
                    <div class="related-product-footer">
                        <div class="related-product-price">
                            ${minPrice > 0 ? `Desde ${minPrice} MXN` : 'Consultar precio'}
                        </div>
                        <div class="related-product-features">
                            ${features}
                        </div>
                    </div>
                </div>
            `;

            return card;
        }

        // Abrir WhatsApp con mensaje del producto
        function openWhatsApp() {
            if (!currentProduct) {
                showToast('Error: Producto no disponible', 'error');
                return;
            }

            const productUrl = window.location.href;
            const message = `¡Hola! Me interesa este producto: * ${currentProduct.title}*\n\n${productUrl} \n\n¿Podrías darme más información ? `;
            const whatsappUrl = `https://wa.me/525564682112?text=${encodeURIComponent(message)}`;

            window.open(whatsappUrl, '_blank');
        }

        // Compartir producto
        function shareProduct() {
            if (!currentProduct) {
                showToast('Error: Producto no disponible', 'error');
                return;
            }

            const productUrl = window.location.href;
            const shareData = {
                title: `${currentProduct.title} - Velas Starlight`,
                text: `Mira este increíble producto: ${currentProduct.title}`,
                url: productUrl
            };

            // Usar Web Share API si está disponible
            if (navigator.share) {
                navigator.share(shareData)
                    .then(() => showToast('Producto compartido exitosamente', 'success'))
                    .catch((error) => {
                        console.log('Error sharing:', error);
                        fallbackShare(productUrl);
                    });
            } else {
                // Fallback: copiar al portapapeles
                fallbackShare(productUrl);
            }
        }

        // Función de respaldo para compartir
        function fallbackShare(url) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(url)
                    .then(() => {
                        showToast('Enlace copiado al portapapeles', 'success');
                    })
                    .catch(() => {
                        showToast('No se pudo copiar el enlace', 'error');
                    });
            } else {
                // Método alternativo para navegadores más antiguos
                const textArea = document.createElement('textarea');
                textArea.value = url;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showToast('Enlace copiado al portapapeles', 'success');
                } catch (err) {
                    showToast('No se pudo copiar el enlace', 'error');
                }
                document.body.removeChild(textArea);
            }
        }

        // Mostrar error
        function showError(message) {
            document.getElementById('product-title').textContent = 'Error';
            document.getElementById('product-description').textContent = message;
            showToast(message, 'error');
        }
    </script>
</body>

</html>